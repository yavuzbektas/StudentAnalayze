{% extends "layouts/base.html" %}

{% block title %} Yoklama Listesi {% endblock %}

{% block content %}



<div class="col-xl-12 col-md-6">
    <div class="card ">
        <div class="card-header">
            <h5>Öğrenci Listesi</h5>
        </div>
        {% include 'attendance/filter.html' %}

        <div class="card-block px-0 py-3">
            <form action="" method="GET">
                {% csrf_token %}

            <div class="accordion" id="accordionExample">
                {% for lesson in lessonPeriod %}
                <div class="panel-group">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#{{lesson.id}}">
                                    <div class="badge badge-primary">{{lesson.id}}.Ders - {{lesson}}</div>
                                </a>
                            </h4>
                        </div>

                        <div id="{{lesson.id}}" class="panel-collapse collapse">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th scope="col">Profil Resmi</th>
                                            <th scope="col">Okul No</th>
                                            <th scope="col">Ad ve Soyad</th>
                                            <th scope="col">tc</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for student in object_list.students %}
                                        <tr class="unread"></tr>
                                        <td>
                                            <a href="{% url 'student-view' student.id %}">
                                                <img class="rounded-circle" style="width:50px;"
                                                    src="{{media_url}}{{student.image}}" alt="activity-user">
                                        </td>
                                        </a>

                                        <td title="Okul No">
                                            <a href="{% url 'student-view' student.id %}">
                                                <h6 class="mb-1">{{student.number}} </h6>
                                            </a>
                                        </td>
                                        <td title="Ad Soyad">
                                            <a href="{% url 'student-view' student.id %}">
                                                <h6 class="mb-1">{{student.firstName}} {{student.lastName}}</h6>
                                            </a>
                                        </td>
                                        <td>
                                            <a href="{% url 'student-view' student.id %}">
                                                <h6 class="mb-1">{{student.TC}} </h6>
                                            </a>
                                        </td>

                                        <td>
                                            <div class="checkbox checkbox-danger checkbox-fill d-inline">
                                                {%for xxx in dailyattendance %}
                                                {% if  xxx.student.id == student.id and xxx.lesPeriod.id == lesson.id %}  
                                                <input type="checkbox" name="cb-1" id="checkbox-infill-{{lesson.id}}{{student.id}}" 
                                                checked value="{{lesson.id}}-{{student.id}}">
                                                <label for="checkbox-infill-{{lesson.id}}{{student.id}}" class="cr">Yok</label>
                                                {%else%} 
                                                <input type="checkbox" name="cb-1" id="checkbox-infill-{{lesson.id}}{{student.id}}" 
                                                unchecked value="{{lesson.id}}-{{student.id}}">
                                                <label for="checkbox-infill-{{lesson.id}}{{student.id}}" class="cr">Yok</label>
                                                {%endif%}
                                                {% endfor %}
                                            </div>                
                                           
                                        </td>

                                        </tr>
                                        {%for xxx in dailyattendance %}
                                        {% if  xxx.student.id == student.id%} evet var {{student}} {%else%} yok {%endif%}
                                        {% endfor %}
                                        {% endfor %}
                                    </tbody>
                                </table>


                            </div>
                        </div>
                        {% endfor %}
                    </div>

                </div>





            </div>
            <hr>
            <button type="submit" class="btn btn-success">Değişiklikleri Kaydet</button>
            
            </form>
        </div>

    </div>
    
    {% endblock content %}
    <!-- Specific Page JS goes HERE  -->
    {% block javascripts %}{% endblock javascripts %}